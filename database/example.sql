DROP DATABASE IF EXISTS `t`;

CREATE DATABASE `t`;

USE `t`;

--
-- Tables
--

CREATE TABLE `teams` (
    `id`            TINYINT         UNSIGNED    NOT NULL PRIMARY KEY AUTO_INCREMENT,
    `name`          VARCHAR(64)                 NOT NULL,
    `abbreviation`  VARCHAR(4)                  NOT NULL,
    `color`         CHAR(6)                     NOT NULL,
    `max_members`   TINYINT         UNSIGNED    NOT NULL DEFAULT 32
);

CREATE TABLE `zones` (
    `id`            TINYINT         UNSIGNED    NOT NULL PRIMARY KEY AUTO_INCREMENT,
    `min_x`         FLOAT                       NOT NULL,
    `min_y`         FLOAT                       NOT NULL,
    `max_x`         FLOAT                       NOT NULL,
    `max_y`         FLOAT                       NOT NULL,
    `team_id`       TINYINT         UNSIGNED    NULL,
    CONSTRAINT `fk_zones_teams` FOREIGN KEY (`team_id`) REFERENCES `teams` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE `users` (
    `id`            INT             UNSIGNED    NOT NULL PRIMARY KEY AUTO_INCREMENT,
    `name`          VARCHAR(24)                 NOT NULL
);

CREATE TABLE `ranks` (
    `id`            TINYINT         UNSIGNED    NOT NULL PRIMARY KEY AUTO_INCREMENT,
    `name`          VARCHAR(32)                 NOT NULL,
    `team_id`       TINYINT         UNSIGNED    NOT NULL,
    CONSTRAINT `fk_ranks_teams` FOREIGN KEY (`team_id`) REFERENCES `teams` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE `members` (
    `id`            INT             UNSIGNED    NOT NULL PRIMARY KEY AUTO_INCREMENT,
    `user_id`       INT             UNSIGNED    NOT NULL,
    `team_id`       TINYINT         UNSIGNED    NOT NULL,
    `rank_id`       TINYINT         UNSIGNED    NOT NULL,
    CONSTRAINT `fk_members_users` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `fk_members_teams` FOREIGN KEY (`team_id`) REFERENCES `teams` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
    CONSTRAINT `fk_members_ranks` FOREIGN KEY (`rank_id`) REFERENCES `ranks` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
);

--
-- Teams
--

INSERT INTO
    `teams` (`name`, `abbreviation`, `color`, `max_members`)
VALUES
    ('Ballas', 'BLS', 'C800C8', 32),
    ('Grove Street Families', 'GSF', '46C800', 32),
    ('Los Santos Vagos', 'LSV', 'FFC800', 32),
    ('Varrio Los Aztecas', 'VLA', '00C8FF', 32);

--
-- Zones
--

INSERT INTO
    `zones` (`min_x`, `min_y`, `max_x`, `max_y`, `team_id`)
VALUES
    ( 647.711975, -2173.290039,  930.221008, -1804.209960, 1),
    ( 851.448974, -1804.209960, 1046.150024, -1577.589965, 1),
    ( 930.221008, -2006.780029, 1073.219970, -1804.209960, 1),
    (1046.150024, -1722.260009, 1161.520019, -1577.589965, 1),
    (1161.520019, -1722.260009, 1323.900024, -1577.589965, 1),

    (1970.619995, -2179.250000, 2089.000000, -1852.869995, 1),
    (2089.000000, -2235.840087, 2201.820068, -1989.900024, 1),
    (2089.000000, -1989.900024, 2324.000000, -1852.869995, 1),
    (2201.820068, -2095.000000, 2324.000000, -1989.900024, 1),
    (2324.000000, -2059.229980, 2541.699951, -1852.869995, 1),
 -- (2541.699951, -1941.400024, 2703.580078, -1852.869995, 1),

    (1812.619995, -1602.310058, 2124.659912, -1449.670043, 1),
    (1812.619995, -1742.310058, 1951.660034, -1602.310058, 1),
    (1812.619995, -1852.869995, 1971.660034, -1742.310058, 1),
    (1951.660034, -1742.310058, 2124.659912, -1602.310058, 1),
    (1971.660034, -1852.869995, 2222.560058, -1742.310058, 1),
    (2124.659912, -1742.310058, 2222.560058, -1494.030029, 1),

    (1996.910034, -1449.670043, 2056.860107, -1350.719970, 1),
    (2056.860107, -1372.040039, 2281.449951, -1210.739990, 1),
    (2056.860107, -1210.739990, 2185.330078, -1126.319946, 1),
    (2056.860107, -1449.670043, 2266.209960, -1372.040039, 1),
    (2124.659912, -1494.030029, 2266.209960, -1449.670043, 1),
    (2185.330078, -1210.739990, 2281.449951, -1154.589965, 1),

    (2222.560058, -1628.530029, 2421.030029, -1494.030029, 1),
    (2266.260009, -1494.030029, 2381.679931, -1372.040039, 1),
    (2281.449951, -1372.040039, 2381.679931, -1135.040039, 1),
    (2381.679931, -1454.349975, 2462.129882, -1135.040039, 1),
 -- (2381.679931, -1494.030029, 2421.030029, -1454.349975, 1),
    (2421.030029, -1628.530029, 2632.830078, -1454.349975, 1),
    (2462.129882, -1454.349975, 2581.729980, -1135.040039, 1),

 -- (2581.729980, -1454.349975, 2632.830078, -1393.420043, 3),
    (2581.729980, -1393.420043, 2747.739990, -1135.040039, 3),

    ( 952.663024, -1130.839965, 1096.469970,  -937.184020, 2),
    (1096.469970, -1130.839965, 1252.329956, -1026.329956, 2),
    (1252.329956, -1130.849975, 1378.329956, -1026.329956, 2),
    (1252.329956,  -926.999023, 1357.000000,  -910.169982, 2),
    (1252.329956, -1026.329956, 1391.050048,  -926.999023, 2),

    (1812.619995, -1350.719970, 2056.860107, -1100.819946, 1),
    (1812.619995, -1449.670043, 1996.910034, -1350.719970, 1),

    (2222.560058, -1722.329956, 2632.830078, -1628.530029, 2),
    (2222.560058, -1852.869995, 2632.830078, -1722.329956, 2),

    (  72.648101, -2173.290039,  342.648010, -1684.650024, 2),
    ( 342.648010, -2173.290039,  647.711975, -1684.650024, 2),

    (2703.580078, -2126.899902, 2959.350097, -1852.869995, 2),

    (1994.329956, -1100.819946, 2056.860107,  -920.815002, 3),
    (2056.860107, -1126.319946, 2126.860107,  -920.815002, 3),
    (2126.860107, -1126.319946, 2185.330078,  -934.489013, 3),
    (2185.330078, -1154.589965, 2281.449951,  -934.489013, 3),
    (2281.449951, -1135.040039, 2632.739990,  -945.034973, 3),
    (2632.739990, -1135.040039, 2747.739990,  -945.034973, 3),
    (2747.739990, -1120.040039, 2959.350097,  -945.034973, 3),

    (2632.830078, -1852.869995, 2959.350097, -1668.130004, 3),
    (2632.830078, -1668.130004, 2747.739990, -1393.420043, 3),
    (2747.739990, -1498.619995, 2959.350097, -1120.040039, 3),
    (2747.739990, -1668.130004, 2959.350097, -1498.619995, 3),

    (1692.619995, -2179.250000, 1812.619995, -1842.270019, 4),
    (1812.619995, -2179.250000, 1970.619995, -1852.869995, 4),

    (1701.900024, -1842.270019, 1812.619995, -1722.260009, 4),
    (1758.900024, -1722.260009, 1812.619995, -1577.589965, 4);

--
-- Users
--

INSERT INTO
    `users` (`name`)
VALUES
    ('ShooterA'), ('ShooterB'), ('ShooterC'), ('ShooterD'), ('ShooterE'), ('ShooterF'), ('ShooterG'), ('ShooterH');

--
-- Ranks
--

INSERT INTO
    `ranks` (`name`, `team_id`)
VALUES
    ('Rank 0', 1), ('Rank 0', 2), ('Rank 0', 3), ('Rank 0', 4);

--
-- Members
--

INSERT INTO
    `members` (`user_id`, `team_id`, `rank_id`)
VALUES
    (1, 1, 1),
    (2, 1, 1),
    (3, 2, 2),
    (4, 2, 2),
    (5, 3, 3),
    (6, 3, 3),
    (7, 4, 4),
    (8, 4, 4);
